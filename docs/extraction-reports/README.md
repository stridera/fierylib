# FieryLib Legacy Data Extraction Reports

This directory contains the authoritative extraction data from the legacy FieryMUD C++ codebase.

## Authoritative Data Source

### abilities.csv

The **single source of truth** for ability metadata, extracted directly from `skills.cpp` `spello()` macro calls.

**Contains:**
- Ability names and types (SPELL, SKILL, SONG, CHANT)
- Damage types (FIRE, COLD, ACID, SHOCK, POISON, ALIGN, MENTAL, PHYSICAL_*)
- Target types and scopes
- Position requirements (STANDING, SITTING)
- Combat flags (violent, canUseInCombat)
- Class assignments

**Why this is authoritative:**
The `spello()` macro in `skills.cpp` defines the actual game behavior. Previous JSON extractions from `magic.cpp` had incorrect damage types (e.g., earthquake was incorrectly listed as DAM_ALIGN instead of DAM_ACID).

## Generated Reports

The `../mapping/` directory contains generated CSV reports:

- **abilities_mapping.csv** - Complete ability catalog with effects
- **effects_reference.csv** - Parameterized effect definitions

These are regenerated by running:
```bash
poetry run python scripts/generate_ability_mapping.py
```

## Data Flow

```
skills.cpp (spello() calls)
       ↓
  abilities.csv (authoritative extraction)
       ↓
  ability_effects_linker.py (uses CSV for damage types)
       ↓
  PostgreSQL database (AbilityEffect table)
       ↓
  abilities_mapping.csv (generated report)
```

## Historical Note

Previous JSON extraction files (`all_spell_implementations.json`, etc.) were removed because they contained incorrect damage type mappings extracted from `magic.cpp` case statements rather than the authoritative `spello()` definitions.
